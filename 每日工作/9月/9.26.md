# 9.26

## 1. 准备面试

### 1. 计网

1. TCP
   1. 三次握手四次挥手，详细
2. HTTP



### 2. 操作系统



### 3. MySQL

#### 索引



### 4. Redis

#### 1. 线程模型

redis的命令线程一定是单线程的，Redis添加线程的原因是防止耗时任务降低性能。

1. 在Redis2.6时，Redis添加了两个线程：文件关闭线程和AOF刷盘线程
2. Redis4.0后，Redis添加了一个新的线程：lazyfree线程，用于异步释放Redis内存。使用`del`命令走的是主线程释放，使用`unlink`命令走的是lazyfree线程释放，假如删除一个大key，不走异步可能会导致主线程卡顿。
3. Redis6.0后，为了加速处理网络IO，从原来的单线程+epoll转变为多线程+epoll，而这个多线程只处理IO任务，处理更加频繁的网络连接和请求。

#### 2. 持久化

1. AOF
   1. 
2. RDB
3. 混合持久化

#### 3. Redis数据结构



#### 4. 缓存设计



### 5. RabbitMQ

#### 1. 如何防止消息丢失（消息可靠性）

1. 生产者端：本地事务完成和消息发送必须是同步的，通过事务消息完成（如果不同步，可能会出现消息发送失败但是事务成功提交）
2. 生产者->MQ Server：通过confirm机制做逻辑处理确保发送成功，没有收到ack则将消息放进重传队列。
3. MQ Server端：为防止宕机导致的消息丢失，

#### 2. 如何防止消息被重复消费



#### 3. 如何保证消息被顺序消费

#### 4. 如何防止消息堆积



